<?xml version="1.0" encoding="UTF-8"?>

<Library xmlns="http://hl7.org/fhir">
  <id value="HIVSimpleCondition"/>
  <text>
    <status value="generated"/><div xmlns="http://www.w3.org/1999/xhtml"><h2>Contents</h2><p><code>text/cql</code></p><pre><code class="language-sql">library HIVSimpleCondition version '0.1.0'

using FHIR version '4.0.1'

include FHIRHelpers version '4.0.1'
include FHIRCommon version '0.1.0' called FC
include AgeRanges version '0.1.0' called AR

// SNOMED-CT, International Edition
codesystem "SNOMED-CT": 'http://snomed.info/sct' version 'http://snomed.info/sct/900000000000207008'

// LOINC, 2.63+
codesystem "LOINC": 'http://loinc.org'

// ConditionOnset: HIV infection
// this conflicts with test result, so should be renamed
code "HIV Positive": '86406008' from "SNOMED-CT" display 'HIV Positive'

context Patient

define "Sex": Patient.gender

// not working: everyone is false for some reason
define "HIV Condition":
  exists ["Condition": "HIV Positive"]

/* define "Get Condition from CodeSystem Declaration":
  [Condition: "SNOMED:86406008"] */

define "Initial Population": true

define "Denominator": true

// always comes up false
define "Numerator":
  "HIV Condition"
</code></pre><p><code>No Content</code> (<code>application/elm+xml</code>)</p></div>
  </text>
  <url value="https://github.com/intrahealth/simple-hiv-ig/Library/HIVSimpleCondition"/>
  <version value="0.1.0"/>
  <name value="HIVSimpleCondition"/>
  <title value="HIVSimpleCondition"/>
  <status value="active"/>
  <experimental value="true"/>
  <type>
    <coding>
      <system value="http://terminology.hl7.org/CodeSystem/library-type"/>
      <code value="logic-library"/>
    </coding>
  </type>
  <date value="2021-06-29T01:02:10+00:00"/>
  <publisher value="IntraHealth International"/>
  <contact>
    <telecom>
      <system value="url"/>
      <value value="http://hl7.org/Special/committees/[something]"/>
    </telecom>
  </contact>
  <content>
    <contentType value="text/cql"/>
    <data value="bGlicmFyeSBISVZTaW1wbGVDb25kaXRpb24gdmVyc2lvbiAnMC4xLjAnCgp1c2luZyBGSElSIHZlcnNpb24gJzQuMC4xJwoKaW5jbHVkZSBGSElSSGVscGVycyB2ZXJzaW9uICc0LjAuMScKaW5jbHVkZSBGSElSQ29tbW9uIHZlcnNpb24gJzAuMS4wJyBjYWxsZWQgRkMKaW5jbHVkZSBBZ2VSYW5nZXMgdmVyc2lvbiAnMC4xLjAnIGNhbGxlZCBBUgoKLy8gU05PTUVELUNULCBJbnRlcm5hdGlvbmFsIEVkaXRpb24KY29kZXN5c3RlbSAiU05PTUVELUNUIjogJ2h0dHA6Ly9zbm9tZWQuaW5mby9zY3QnIHZlcnNpb24gJ2h0dHA6Ly9zbm9tZWQuaW5mby9zY3QvOTAwMDAwMDAwMDAwMjA3MDA4JwoKLy8gTE9JTkMsIDIuNjMrCmNvZGVzeXN0ZW0gIkxPSU5DIjogJ2h0dHA6Ly9sb2luYy5vcmcnCgovLyBDb25kaXRpb25PbnNldDogSElWIGluZmVjdGlvbgovLyB0aGlzIGNvbmZsaWN0cyB3aXRoIHRlc3QgcmVzdWx0LCBzbyBzaG91bGQgYmUgcmVuYW1lZApjb2RlICJISVYgUG9zaXRpdmUiOiAnODY0MDYwMDgnIGZyb20gIlNOT01FRC1DVCIgZGlzcGxheSAnSElWIFBvc2l0aXZlJwoKY29udGV4dCBQYXRpZW50CgpkZWZpbmUgIlNleCI6IFBhdGllbnQuZ2VuZGVyCgovLyBub3Qgd29ya2luZzogZXZlcnlvbmUgaXMgZmFsc2UgZm9yIHNvbWUgcmVhc29uCmRlZmluZSAiSElWIENvbmRpdGlvbiI6CiAgZXhpc3RzIFsiQ29uZGl0aW9uIjogIkhJViBQb3NpdGl2ZSJdCgovKiBkZWZpbmUgIkdldCBDb25kaXRpb24gZnJvbSBDb2RlU3lzdGVtIERlY2xhcmF0aW9uIjoKICBbQ29uZGl0aW9uOiAiU05PTUVEOjg2NDA2MDA4Il0gKi8KCmRlZmluZSAiSW5pdGlhbCBQb3B1bGF0aW9uIjogdHJ1ZQoKZGVmaW5lICJEZW5vbWluYXRvciI6IHRydWUKCi8vIGFsd2F5cyBjb21lcyB1cCBmYWxzZQpkZWZpbmUgIk51bWVyYXRvciI6CiAgIkhJViBDb25kaXRpb24iCg=="/>
  </content>
  <content>
    <contentType value="application/elm+xml"/>
  </content>
</Library>