@prefix fhir: <http://hl7.org/fhir/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# - resource -------------------------------------------------------------------

<https://github.com/intrahealth/simple-hiv-ig/Library/HIVSimpleTestResult> a fhir:Library;
  fhir:nodeRole fhir:treeRoot;
  fhir:Resource.id [ fhir:value "HIVSimpleTestResult"];
  fhir:DomainResource.text [
     fhir:Narrative.status [ fhir:value "generated" ];
     fhir:Narrative.div "<div xmlns=\"http://www.w3.org/1999/xhtml\"><h2>Contents</h2><p><code>text/cql</code></p><pre><code class=\"language-sql\">library HIVSimpleTestResult version '0.1.0'\n\nusing FHIR version '4.0.1'\n\ninclude FHIRHelpers version '4.0.1'\ninclude FHIRCommon version '0.1.0' called FC\ninclude AgeRanges version '0.1.0' called AR\n\n// SNOMED-CT, International Edition\ncodesystem \"SNOMED-CT\": 'http://snomed.info/sct' version 'http://snomed.info/sct/900000000000207008'\n\n// LOINC, 2.63+\ncodesystem \"LOINC\": 'http://loinc.org'\n\n// HIV Test Results\ncode \"HIV Negative\": '165815009' from \"SNOMED-CT\" display 'HIV Negative'\ncode \"HIV Positive\": '165816005' from \"SNOMED-CT\" display 'HIV Positive'\ncode \"HIV 1 and 2 tests - Meaningful Use set\": '75622-1' from \"LOINC\" display 'HIV 1 and 2 tests - Meaningful Use set'\n\ncontext Patient\n\ndefine \"HIV Test Exists\":\n  exists ([Observation: \"HIV 1 and 2 tests - Meaningful Use set\"])\n\ndefine \"HIV Positive Observation\":\n  [Observation: \"HIV 1 and 2 tests - Meaningful Use set\"] Observation\n    where Observation.value = \"HIV Positive\"\n\ndefine \"HIV Negative Observation\":\n  [Observation: \"HIV 1 and 2 tests - Meaningful Use set\"] Observation\n    where Observation.value = \"HIV Negative\"\n\ndefine \"Is HIV Positive\":\n  exists (\"HIV Positive Observation\")\n  and \"HIV Test Exists\"\n\ndefine \"Is HIV Negative\":\n  exists (\"HIV Negative Observation\")\n  and \"HIV Test Exists\"\n\n// always null\ndefine \"HIV Test Results\":\n  case\n    when \"Is HIV Positive\" then \"HIV Positive\"\n    when \"Is HIV Negative\" then \"HIV Negative\"\n    else null\n  end\n\ndefine \"Sex\": Patient.gender\n\n// Age Group/Sex\n// always null\ndefine \"Age Group/Sex\": AR.\"Age Group\".code + ':' + \"Sex\"\n\n// always null\ndefine \"Age Group/Sex/HIV Test Results\":\n  AR.\"Age Group\".code + ':' + \"Sex\" + ':' + \"HIV Test Results\".code\n\ndefine \"Initial Population\": true\n\ndefine \"Denominator\": true\n\ndefine \"Numerator\":\n  \"Is HIV Negative\"\n  and \"Sex\" = 'female'\n</code></pre><p><code>No Content</code> (<code>application/elm+xml</code>)</p></div>"
  ];
  fhir:Library.url [ fhir:value "https://github.com/intrahealth/simple-hiv-ig/Library/HIVSimpleTestResult"];
  fhir:Library.version [ fhir:value "0.1.0"];
  fhir:Library.name [ fhir:value "HIVSimpleTestResult"];
  fhir:Library.title [ fhir:value "HIVSimpleTestResult"];
  fhir:Library.status [ fhir:value "active"];
  fhir:Library.experimental [ fhir:value "true"^^xsd:boolean];
  fhir:Library.type [
     fhir:CodeableConcept.coding [
       fhir:index 0;
       fhir:Coding.system [ fhir:value "http://terminology.hl7.org/CodeSystem/library-type" ];
       fhir:Coding.code [ fhir:value "logic-library" ]
     ]
  ];
  fhir:Library.date [ fhir:value "2021-06-29T00:55:49+00:00"^^xsd:dateTime];
  fhir:Library.publisher [ fhir:value "IntraHealth International"];
  fhir:Library.contact [
     fhir:index 0;
     fhir:ContactDetail.telecom [
       fhir:index 0;
       fhir:ContactPoint.system [ fhir:value "url" ];
       fhir:ContactPoint.value [ fhir:value "http://hl7.org/Special/committees/[something]" ]
     ]
  ];
  fhir:Library.content [
     fhir:index 0;
     fhir:Attachment.contentType [ fhir:value "text/cql" ];
     fhir:Attachment.data [ fhir:value "bGlicmFyeSBISVZTaW1wbGVUZXN0UmVzdWx0IHZlcnNpb24gJzAuMS4wJwoKdXNpbmcgRkhJUiB2ZXJzaW9uICc0LjAuMScKCmluY2x1ZGUgRkhJUkhlbHBlcnMgdmVyc2lvbiAnNC4wLjEnCmluY2x1ZGUgRkhJUkNvbW1vbiB2ZXJzaW9uICcwLjEuMCcgY2FsbGVkIEZDCmluY2x1ZGUgQWdlUmFuZ2VzIHZlcnNpb24gJzAuMS4wJyBjYWxsZWQgQVIKCi8vIFNOT01FRC1DVCwgSW50ZXJuYXRpb25hbCBFZGl0aW9uCmNvZGVzeXN0ZW0gIlNOT01FRC1DVCI6ICdodHRwOi8vc25vbWVkLmluZm8vc2N0JyB2ZXJzaW9uICdodHRwOi8vc25vbWVkLmluZm8vc2N0LzkwMDAwMDAwMDAwMDIwNzAwOCcKCi8vIExPSU5DLCAyLjYzKwpjb2Rlc3lzdGVtICJMT0lOQyI6ICdodHRwOi8vbG9pbmMub3JnJwoKLy8gSElWIFRlc3QgUmVzdWx0cwpjb2RlICJISVYgTmVnYXRpdmUiOiAnMTY1ODE1MDA5JyBmcm9tICJTTk9NRUQtQ1QiIGRpc3BsYXkgJ0hJViBOZWdhdGl2ZScKY29kZSAiSElWIFBvc2l0aXZlIjogJzE2NTgxNjAwNScgZnJvbSAiU05PTUVELUNUIiBkaXNwbGF5ICdISVYgUG9zaXRpdmUnCmNvZGUgIkhJViAxIGFuZCAyIHRlc3RzIC0gTWVhbmluZ2Z1bCBVc2Ugc2V0IjogJzc1NjIyLTEnIGZyb20gIkxPSU5DIiBkaXNwbGF5ICdISVYgMSBhbmQgMiB0ZXN0cyAtIE1lYW5pbmdmdWwgVXNlIHNldCcKCmNvbnRleHQgUGF0aWVudAoKZGVmaW5lICJISVYgVGVzdCBFeGlzdHMiOgogIGV4aXN0cyAoW09ic2VydmF0aW9uOiAiSElWIDEgYW5kIDIgdGVzdHMgLSBNZWFuaW5nZnVsIFVzZSBzZXQiXSkKCmRlZmluZSAiSElWIFBvc2l0aXZlIE9ic2VydmF0aW9uIjoKICBbT2JzZXJ2YXRpb246ICJISVYgMSBhbmQgMiB0ZXN0cyAtIE1lYW5pbmdmdWwgVXNlIHNldCJdIE9ic2VydmF0aW9uCiAgICB3aGVyZSBPYnNlcnZhdGlvbi52YWx1ZSA9ICJISVYgUG9zaXRpdmUiCgpkZWZpbmUgIkhJViBOZWdhdGl2ZSBPYnNlcnZhdGlvbiI6CiAgW09ic2VydmF0aW9uOiAiSElWIDEgYW5kIDIgdGVzdHMgLSBNZWFuaW5nZnVsIFVzZSBzZXQiXSBPYnNlcnZhdGlvbgogICAgd2hlcmUgT2JzZXJ2YXRpb24udmFsdWUgPSAiSElWIE5lZ2F0aXZlIgoKZGVmaW5lICJJcyBISVYgUG9zaXRpdmUiOgogIGV4aXN0cyAoIkhJViBQb3NpdGl2ZSBPYnNlcnZhdGlvbiIpCiAgYW5kICJISVYgVGVzdCBFeGlzdHMiCgpkZWZpbmUgIklzIEhJViBOZWdhdGl2ZSI6CiAgZXhpc3RzICgiSElWIE5lZ2F0aXZlIE9ic2VydmF0aW9uIikKICBhbmQgIkhJViBUZXN0IEV4aXN0cyIKCi8vIGFsd2F5cyBudWxsCmRlZmluZSAiSElWIFRlc3QgUmVzdWx0cyI6CiAgY2FzZQogICAgd2hlbiAiSXMgSElWIFBvc2l0aXZlIiB0aGVuICJISVYgUG9zaXRpdmUiCiAgICB3aGVuICJJcyBISVYgTmVnYXRpdmUiIHRoZW4gIkhJViBOZWdhdGl2ZSIKICAgIGVsc2UgbnVsbAogIGVuZAoKZGVmaW5lICJTZXgiOiBQYXRpZW50LmdlbmRlcgoKLy8gQWdlIEdyb3VwL1NleAovLyBhbHdheXMgbnVsbApkZWZpbmUgIkFnZSBHcm91cC9TZXgiOiBBUi4iQWdlIEdyb3VwIi5jb2RlICsgJzonICsgIlNleCIKCi8vIGFsd2F5cyBudWxsCmRlZmluZSAiQWdlIEdyb3VwL1NleC9ISVYgVGVzdCBSZXN1bHRzIjoKICBBUi4iQWdlIEdyb3VwIi5jb2RlICsgJzonICsgIlNleCIgKyAnOicgKyAiSElWIFRlc3QgUmVzdWx0cyIuY29kZQoKZGVmaW5lICJJbml0aWFsIFBvcHVsYXRpb24iOiB0cnVlCgpkZWZpbmUgIkRlbm9taW5hdG9yIjogdHJ1ZQoKZGVmaW5lICJOdW1lcmF0b3IiOgogICJJcyBISVYgTmVnYXRpdmUiCiAgYW5kICJTZXgiID0gJ2ZlbWFsZScK"^^xsd:base64Binary ]
  ], [
     fhir:index 1;
     fhir:Attachment.contentType [ fhir:value "application/elm+xml" ]
  ] .

# - ontology header ------------------------------------------------------------

<https://github.com/intrahealth/simple-hiv-ig/Library/HIVSimpleTestResult.ttl> a owl:Ontology;
  owl:imports fhir:fhir.ttl .

# -------------------------------------------------------------------------------------

