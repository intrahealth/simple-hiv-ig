Alias: $Patient-HIVSimple3 = https://intrahealth.github.io/simple-hiv-ig/Patient/Patient-HIVSimple3
Alias: $Organization-HIVSimple3 = https://intrahealth.github.io/simple-hiv-ig/Organization/Organization-HIVSimple3
Alias: $Location-HIVSimple3 = https://intrahealth.github.io/simple-hiv-ig/Location/Location-HIVSimple3
Alias: $Encounter-HIVSimple3 = https://intrahealth.github.io/simple-hiv-ig/Encounter/Encounter-HIVSimple3
Alias: $DiagnosticReport-HIVSimple3 = https://intrahealth.github.io/simple-hiv-ig/DiagnosticReport/DiagnosticReport-HIVSimple3
Alias: $Observation-HIVSimple3 = https://intrahealth.github.io/simple-hiv-ig/Observation/Observation-HIVSimple3


Instance:     Patient-HIVSimple3
InstanceOf:   Patient
Title: "Patient-HIVSimple3"
Description: "Patient-HIVSimple3"
* name[+].given = "Felix"
* name[=].family = "Cat"
* name[=].text = "Felix Cat"
* gender = #male
* birthDate = "1971-01-01"


Instance: Organization-HIVSimple3
InstanceOf: Organization
Title: "Organization-HIVSimple3"
Description: "Organization-HIVSimple3"
* name = "Government Hospital"


Instance: Location-HIVSimple3
InstanceOf: Location
Title: "Location-HIVSimple3"
Description: "Location-HIVSimple3"
* managingOrganization = Reference($Organization-HIVSimple3)
* identifier[+].system = $synthea
* identifier[=].value = "Location-HIVSimple3"
* identifier[+].system = $HIVVS
* identifier[=].value = #Location-HIVSimple3

// conditions
// not hiv positive, so removed
// not female, no pregnancy, so removed

// hiv positive test

Instance: Encounter-HIVSimple3
InstanceOf: Encounter
Title: "Encounter-HIVSimple3"
Description: "Encounter-HIVSimple3"
* status = #finished
* class = $v3-ActCode#ACUTE
* subject = Reference($Patient-HIVSimple3)
* serviceProvider = Reference($Organization-HIVSimple3)
* location[+].location = Reference($Location-HIVSimple3)
* period.start = "2020-01-01"
* period.end = "2020-01-01"


Instance: DiagnosticReport-HIVSimple3
InstanceOf: DiagnosticReport
Title: "DiagnosticReport-HIVSimple3"
Description: "DiagnosticReport-HIVSimple3"
* status = #final
* encounter = Reference($Encounter-HIVSimple3)
* subject = Reference($Patient-HIVSimple3)
* result = Reference($Observation-HIVSimple3)
* code = $LNC#75622-1 "HIV 1 and 2 tests - Meaningful Use set"


Instance: Observation-HIVSimple3
InstanceOf: Observation
Title: "Observation-HIVSimple3"
Description: "Observation-HIVSimple3"
* status = #final
* encounter = Reference($Encounter-HIVSimple3)
* subject = Reference($Patient-HIVSimple3)
* code = $LNC#75622-1 "HIV 1 and 2 tests - Meaningful Use set"
* valueCodeableConcept = $SCT#165815009 "HIV Negative"

// hiv viral load
// not hiv positive

// bundle it all up

Instance: Example-HIVSimple3
InstanceOf: Bundle
Title: "Example-HIVSimple3"
Description: "Example-HIVSimple3"
* type = #transaction

* entry[+].fullUrl = $Patient-HIVSimple3
* entry[=].request.url = "Patient"
* entry[=].resource = Patient-HIVSimple3
* insert patient-bundle

* entry[+].fullUrl = $Organization-HIVSimple3
* entry[=].request.url = "Organization"
* entry[=].resource = Organization-HIVSimple3
* insert patient-bundle

* entry[+].fullUrl = $Location-HIVSimple3
* entry[=].request.url = "Location"
* entry[=].resource = Location-HIVSimple3
* insert patient-bundle

// encounter for hiv test

* entry[+].fullUrl = $Encounter-HIVSimple3
* entry[=].request.url = "Encounter"
* entry[=].resource = Encounter-HIVSimple3
* insert patient-bundle

* entry[+].fullUrl = $DiagnosticReport-HIVSimple3
* entry[=].request.url = "DiagnosticReport"
* entry[=].resource = DiagnosticReport-HIVSimple3
* insert patient-bundle

* entry[+].fullUrl = $Observation-HIVSimple3
* entry[=].request.url = "Observation"
* entry[=].resource = Observation-HIVSimple3
* insert patient-bundle