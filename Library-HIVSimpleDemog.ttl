@prefix fhir: <http://hl7.org/fhir/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# - resource -------------------------------------------------------------------

<https://github.com/intrahealth/simple-hiv-ig/Library/HIVSimpleDemog> a fhir:Library;
  fhir:nodeRole fhir:treeRoot;
  fhir:Resource.id [ fhir:value "HIVSimpleDemog"];
  fhir:DomainResource.text [
     fhir:Narrative.status [ fhir:value "generated" ];
     fhir:Narrative.div "<div xmlns=\"http://www.w3.org/1999/xhtml\"><h2>Contents</h2><p><code>text/cql</code></p><pre><code class=\"language-sql\">library HIVSimpleDemog version '0.1.0'\n\nusing FHIR version '4.0.1'\n\ninclude FHIRHelpers version '4.0.1'\ninclude FHIRCommon version '0.1.0' called FC\ninclude AgeRanges version '0.1.0' called AR\n\n// SNOMED-CT, International Edition\ncodesystem \"SNOMED-CT\": 'http://snomed.info/sct' version 'http://snomed.info/sct/900000000000207008'\n\n// LOINC, 2.63+\ncodesystem \"LOINC\": 'http://loinc.org'\n\n// inclusive (closed) boundaries are indicated with square brackets,\n// and exclusive (open) boundaries are indicated with parentheses\nparameter MeasurementPeriod default Interval[@1970-01-01, @2021-01-01)\n\ncontext Patient\n\ndefine \"Sex\": Patient.gender\n\n// not working as expected\ndefine \"Age Group Test\":\n  AR.\"Age Group\".code\n\n  define Patient0To5AndFemale:\n    AgeInYearsAt(start of \"MeasurementPeriod\") &gt;= 0\n      and AgeInYearsAt(start of \"MeasurementPeriod\") &lt; 5\n      and Patient.gender = 'female'\n\n  define Patient5To15AndFemale:\n    AgeInYearsAt(start of \"MeasurementPeriod\") &gt;= 5\n      and AgeInYearsAt(start of \"MeasurementPeriod\") &lt; 15\n      and Patient.gender = 'female'\n\n  define Patient15To25AndFemale:\n    AgeInYearsAt(start of \"MeasurementPeriod\") &gt;= 15\n      and AgeInYearsAt(start of \"MeasurementPeriod\") &lt; 25\n      and Patient.gender = 'female'\n\n  define Patient25To50AndFemale:\n    AgeInYearsAt(start of \"MeasurementPeriod\") &gt;= 25\n      and AgeInYearsAt(start of \"MeasurementPeriod\") &lt; 50\n      and Patient.gender = 'female'\n\n  define Patient50To65AndFemale:\n    AgeInYearsAt(start of \"MeasurementPeriod\") &gt;= 50\n      and AgeInYearsAt(start of \"MeasurementPeriod\") &lt; 65\n      and Patient.gender = 'female'\n\n  define Patient65ToHighestAndFemale:\n    AgeInYearsAt(start of \"MeasurementPeriod\") &gt;= 65\n      and Patient.gender = 'female'\n\n  define Patient0To5AndMale:\n    AgeInYearsAt(start of \"MeasurementPeriod\") &gt;= 0\n      and AgeInYearsAt(start of \"MeasurementPeriod\") &lt; 5\n      and Patient.gender = 'male'\n\n  define Patient5To15AndMale:\n    AgeInYearsAt(start of \"MeasurementPeriod\") &gt;= 5\n      and AgeInYearsAt(start of \"MeasurementPeriod\") &lt; 15\n      and Patient.gender = 'male'\n\n  define Patient15To25AndMale:\n    AgeInYearsAt(start of \"MeasurementPeriod\") &gt;= 15\n      and AgeInYearsAt(start of \"MeasurementPeriod\") &lt; 25\n      and Patient.gender = 'male'\n\n  define Patient25To50AndMale:\n    AgeInYearsAt(start of \"MeasurementPeriod\") &gt;= 25\n      and AgeInYearsAt(start of \"MeasurementPeriod\") &lt; 50\n      and Patient.gender = 'male'\n\n  define Patient50To65AndMale:\n    AgeInYearsAt(start of \"MeasurementPeriod\") &gt;= 50\n      and AgeInYearsAt(start of \"MeasurementPeriod\") &lt; 65\n      and Patient.gender = 'male'\n\n  define Patient65ToHighestAndMale:\n    AgeInYearsAt(start of \"MeasurementPeriod\") &gt;= 65\n      and Patient.gender = 'male'\n\ndefine \"Initial Population\": true\n\ndefine \"Denominator\": true\n\ndefine \"Numerator\": true\n</code></pre><p><code>No Content</code> (<code>application/elm+xml</code>)</p></div>"
  ];
  fhir:Library.url [ fhir:value "https://github.com/intrahealth/simple-hiv-ig/Library/HIVSimpleDemog"];
  fhir:Library.version [ fhir:value "0.1.0"];
  fhir:Library.name [ fhir:value "HIVSimpleDemog"];
  fhir:Library.title [ fhir:value "HIVSimpleDemog"];
  fhir:Library.status [ fhir:value "active"];
  fhir:Library.experimental [ fhir:value "true"^^xsd:boolean];
  fhir:Library.type [
     fhir:CodeableConcept.coding [
       fhir:index 0;
       fhir:Coding.system [ fhir:value "http://terminology.hl7.org/CodeSystem/library-type" ];
       fhir:Coding.code [ fhir:value "logic-library" ]
     ]
  ];
  fhir:Library.date [ fhir:value "2021-06-29T00:55:49+00:00"^^xsd:dateTime];
  fhir:Library.publisher [ fhir:value "IntraHealth International"];
  fhir:Library.contact [
     fhir:index 0;
     fhir:ContactDetail.telecom [
       fhir:index 0;
       fhir:ContactPoint.system [ fhir:value "url" ];
       fhir:ContactPoint.value [ fhir:value "http://hl7.org/Special/committees/[something]" ]
     ]
  ];
  fhir:Library.content [
     fhir:index 0;
     fhir:Attachment.contentType [ fhir:value "text/cql" ];
     fhir:Attachment.data [ fhir:value "bGlicmFyeSBISVZTaW1wbGVEZW1vZyB2ZXJzaW9uICcwLjEuMCcKCnVzaW5nIEZISVIgdmVyc2lvbiAnNC4wLjEnCgppbmNsdWRlIEZISVJIZWxwZXJzIHZlcnNpb24gJzQuMC4xJwppbmNsdWRlIEZISVJDb21tb24gdmVyc2lvbiAnMC4xLjAnIGNhbGxlZCBGQwppbmNsdWRlIEFnZVJhbmdlcyB2ZXJzaW9uICcwLjEuMCcgY2FsbGVkIEFSCgovLyBTTk9NRUQtQ1QsIEludGVybmF0aW9uYWwgRWRpdGlvbgpjb2Rlc3lzdGVtICJTTk9NRUQtQ1QiOiAnaHR0cDovL3Nub21lZC5pbmZvL3NjdCcgdmVyc2lvbiAnaHR0cDovL3Nub21lZC5pbmZvL3NjdC85MDAwMDAwMDAwMDAyMDcwMDgnCgovLyBMT0lOQywgMi42MysKY29kZXN5c3RlbSAiTE9JTkMiOiAnaHR0cDovL2xvaW5jLm9yZycKCi8vIGluY2x1c2l2ZSAoY2xvc2VkKSBib3VuZGFyaWVzIGFyZSBpbmRpY2F0ZWQgd2l0aCBzcXVhcmUgYnJhY2tldHMsCi8vIGFuZCBleGNsdXNpdmUgKG9wZW4pIGJvdW5kYXJpZXMgYXJlIGluZGljYXRlZCB3aXRoIHBhcmVudGhlc2VzCnBhcmFtZXRlciBNZWFzdXJlbWVudFBlcmlvZCBkZWZhdWx0IEludGVydmFsW0AxOTcwLTAxLTAxLCBAMjAyMS0wMS0wMSkKCmNvbnRleHQgUGF0aWVudAoKZGVmaW5lICJTZXgiOiBQYXRpZW50LmdlbmRlcgoKLy8gbm90IHdvcmtpbmcgYXMgZXhwZWN0ZWQKZGVmaW5lICJBZ2UgR3JvdXAgVGVzdCI6CiAgQVIuIkFnZSBHcm91cCIuY29kZQoKICBkZWZpbmUgUGF0aWVudDBUbzVBbmRGZW1hbGU6CiAgICBBZ2VJblllYXJzQXQoc3RhcnQgb2YgIk1lYXN1cmVtZW50UGVyaW9kIikgPj0gMAogICAgICBhbmQgQWdlSW5ZZWFyc0F0KHN0YXJ0IG9mICJNZWFzdXJlbWVudFBlcmlvZCIpIDwgNQogICAgICBhbmQgUGF0aWVudC5nZW5kZXIgPSAnZmVtYWxlJwoKICBkZWZpbmUgUGF0aWVudDVUbzE1QW5kRmVtYWxlOgogICAgQWdlSW5ZZWFyc0F0KHN0YXJ0IG9mICJNZWFzdXJlbWVudFBlcmlvZCIpID49IDUKICAgICAgYW5kIEFnZUluWWVhcnNBdChzdGFydCBvZiAiTWVhc3VyZW1lbnRQZXJpb2QiKSA8IDE1CiAgICAgIGFuZCBQYXRpZW50LmdlbmRlciA9ICdmZW1hbGUnCgogIGRlZmluZSBQYXRpZW50MTVUbzI1QW5kRmVtYWxlOgogICAgQWdlSW5ZZWFyc0F0KHN0YXJ0IG9mICJNZWFzdXJlbWVudFBlcmlvZCIpID49IDE1CiAgICAgIGFuZCBBZ2VJblllYXJzQXQoc3RhcnQgb2YgIk1lYXN1cmVtZW50UGVyaW9kIikgPCAyNQogICAgICBhbmQgUGF0aWVudC5nZW5kZXIgPSAnZmVtYWxlJwoKICBkZWZpbmUgUGF0aWVudDI1VG81MEFuZEZlbWFsZToKICAgIEFnZUluWWVhcnNBdChzdGFydCBvZiAiTWVhc3VyZW1lbnRQZXJpb2QiKSA+PSAyNQogICAgICBhbmQgQWdlSW5ZZWFyc0F0KHN0YXJ0IG9mICJNZWFzdXJlbWVudFBlcmlvZCIpIDwgNTAKICAgICAgYW5kIFBhdGllbnQuZ2VuZGVyID0gJ2ZlbWFsZScKCiAgZGVmaW5lIFBhdGllbnQ1MFRvNjVBbmRGZW1hbGU6CiAgICBBZ2VJblllYXJzQXQoc3RhcnQgb2YgIk1lYXN1cmVtZW50UGVyaW9kIikgPj0gNTAKICAgICAgYW5kIEFnZUluWWVhcnNBdChzdGFydCBvZiAiTWVhc3VyZW1lbnRQZXJpb2QiKSA8IDY1CiAgICAgIGFuZCBQYXRpZW50LmdlbmRlciA9ICdmZW1hbGUnCgogIGRlZmluZSBQYXRpZW50NjVUb0hpZ2hlc3RBbmRGZW1hbGU6CiAgICBBZ2VJblllYXJzQXQoc3RhcnQgb2YgIk1lYXN1cmVtZW50UGVyaW9kIikgPj0gNjUKICAgICAgYW5kIFBhdGllbnQuZ2VuZGVyID0gJ2ZlbWFsZScKCiAgZGVmaW5lIFBhdGllbnQwVG81QW5kTWFsZToKICAgIEFnZUluWWVhcnNBdChzdGFydCBvZiAiTWVhc3VyZW1lbnRQZXJpb2QiKSA+PSAwCiAgICAgIGFuZCBBZ2VJblllYXJzQXQoc3RhcnQgb2YgIk1lYXN1cmVtZW50UGVyaW9kIikgPCA1CiAgICAgIGFuZCBQYXRpZW50LmdlbmRlciA9ICdtYWxlJwoKICBkZWZpbmUgUGF0aWVudDVUbzE1QW5kTWFsZToKICAgIEFnZUluWWVhcnNBdChzdGFydCBvZiAiTWVhc3VyZW1lbnRQZXJpb2QiKSA+PSA1CiAgICAgIGFuZCBBZ2VJblllYXJzQXQoc3RhcnQgb2YgIk1lYXN1cmVtZW50UGVyaW9kIikgPCAxNQogICAgICBhbmQgUGF0aWVudC5nZW5kZXIgPSAnbWFsZScKCiAgZGVmaW5lIFBhdGllbnQxNVRvMjVBbmRNYWxlOgogICAgQWdlSW5ZZWFyc0F0KHN0YXJ0IG9mICJNZWFzdXJlbWVudFBlcmlvZCIpID49IDE1CiAgICAgIGFuZCBBZ2VJblllYXJzQXQoc3RhcnQgb2YgIk1lYXN1cmVtZW50UGVyaW9kIikgPCAyNQogICAgICBhbmQgUGF0aWVudC5nZW5kZXIgPSAnbWFsZScKCiAgZGVmaW5lIFBhdGllbnQyNVRvNTBBbmRNYWxlOgogICAgQWdlSW5ZZWFyc0F0KHN0YXJ0IG9mICJNZWFzdXJlbWVudFBlcmlvZCIpID49IDI1CiAgICAgIGFuZCBBZ2VJblllYXJzQXQoc3RhcnQgb2YgIk1lYXN1cmVtZW50UGVyaW9kIikgPCA1MAogICAgICBhbmQgUGF0aWVudC5nZW5kZXIgPSAnbWFsZScKCiAgZGVmaW5lIFBhdGllbnQ1MFRvNjVBbmRNYWxlOgogICAgQWdlSW5ZZWFyc0F0KHN0YXJ0IG9mICJNZWFzdXJlbWVudFBlcmlvZCIpID49IDUwCiAgICAgIGFuZCBBZ2VJblllYXJzQXQoc3RhcnQgb2YgIk1lYXN1cmVtZW50UGVyaW9kIikgPCA2NQogICAgICBhbmQgUGF0aWVudC5nZW5kZXIgPSAnbWFsZScKCiAgZGVmaW5lIFBhdGllbnQ2NVRvSGlnaGVzdEFuZE1hbGU6CiAgICBBZ2VJblllYXJzQXQoc3RhcnQgb2YgIk1lYXN1cmVtZW50UGVyaW9kIikgPj0gNjUKICAgICAgYW5kIFBhdGllbnQuZ2VuZGVyID0gJ21hbGUnCgpkZWZpbmUgIkluaXRpYWwgUG9wdWxhdGlvbiI6IHRydWUKCmRlZmluZSAiRGVub21pbmF0b3IiOiB0cnVlCgpkZWZpbmUgIk51bWVyYXRvciI6IHRydWUK"^^xsd:base64Binary ]
  ], [
     fhir:index 1;
     fhir:Attachment.contentType [ fhir:value "application/elm+xml" ]
  ] .

# - ontology header ------------------------------------------------------------

<https://github.com/intrahealth/simple-hiv-ig/Library/HIVSimpleDemog.ttl> a owl:Ontology;
  owl:imports fhir:fhir.ttl .

# -------------------------------------------------------------------------------------

